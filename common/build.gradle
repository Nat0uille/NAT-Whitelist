plugins {
    id "java"
}

group = "fr.Nat0uille"

repositories {
    mavenCentral()
}

dependencies {
    // Database drivers
    implementation 'com.h2database:h2:2.4.240'
    implementation 'com.mysql:mysql-connector-j:9.5.0'
    implementation 'org.mariadb.jdbc:mariadb-java-client:3.3.1'

    // Connection pooling
    implementation 'com.zaxxer:HikariCP:5.1.0'

    // Adventure API
    implementation 'net.kyori:adventure-text-minimessage:4.26.1'
    implementation 'net.kyori:adventure-text-serializer-legacy:4.26.1'

    // Json manipulation
    implementation 'com.google.code.gson:gson:2.13.2'
}

java {
    def javaVersion = JavaVersion.toVersion(targetJavaVersion)
    sourceCompatibility = javaVersion
    targetCompatibility = javaVersion
    if (JavaVersion.current() < javaVersion) {
        toolchain.languageVersion = JavaLanguageVersion.of(targetJavaVersion)
    }
}

jar {
    destinationDirectory = file("$rootDir/jar")
}

tasks.register('cleanJar', Delete) {
    delete file("$rootDir/jar")
}

tasks.named('clean') {
    dependsOn cleanJar
}
